{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Games\\\\Desktop\\\\Homework\\\\vendia_project\\\\src\\\\components\\\\auth\\\\SignUp.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { auth, db } from \"../../firebase\";\nimport { createUserWithEmailAndPassword } from \"firebase/auth\";\nimport { collection, doc, setDoc, getDocs, query, where } from 'firebase/firestore';\nimport { Redirect } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const SignUp = () => {\n  _s();\n  const [userEmail, setUserEmail] = useState(null);\n  const [userPassword, setUserPassword] = useState(null);\n  const [error, setError] = useState(null);\n  const [userUsername, setUserUsername] = useState(null);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const register = async e => {\n    e.preventDefault();\n    try {\n      setIsLoading(true);\n      if (!userUsername || !userEmail || !userPassword) {\n        setError(\"Please fill in all the fields.\");\n        setIsLoading(false);\n        return;\n      }\n      const usernameQuery = query(collection(db, 'users'), where('displayName', '==', userUsername));\n      const usernameQuerySnapshot = await getDocs(usernameQuery);\n      if (usernameQuerySnapshot.empty) {\n        const userCredential = await createUserWithEmailAndPassword(auth, userEmail, userPassword);\n        console.log(userCredential);\n        const userDocRef = doc(db, 'users', userCredential.user.uid);\n        await setDoc(userDocRef, {\n          email: userEmail,\n          displayName: userUsername,\n          role: 'user',\n          orgs: [0]\n        });\n        setIsAuthenticated(true);\n      } else {\n        setError('Username is already taken.');\n      }\n    } catch (error) {\n      console.log(error);\n      setError(error.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  if (isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/Home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 14\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center justify-center\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: register,\n      className: \"max-w-md px-4 py-8 bg-white rounded-lg shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Username...\",\n        value: userUsername,\n        onChange: e => setUserUsername(e.target.value),\n        required: true,\n        className: \"w-full px-4 py-2 mb-4 border rounded-lg focus:outline-none focus:ring focus:border-blue-300\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        placeholder: \"Email...\",\n        value: userEmail,\n        onChange: e => setUserEmail(e.target.value),\n        required: true,\n        className: \"w-full px-4 py-2 mb-4 border rounded-lg focus:outline-none focus:ring focus:border-blue-300\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Password...\",\n        value: userPassword,\n        onChange: e => setUserPassword(e.target.value),\n        required: true,\n        className: \"w-full px-4 py-2 mb-4 border rounded-lg focus:outline-none focus:ring focus:border-blue-300\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring focus:border-blue-300\",\n        type: \"submit\",\n        disabled: isLoading,\n        children: isLoading ? \"Signing Up...\" : \"Sign Up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-red-500\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 7\n  }, this);\n};\n\n// import React, { useState } from 'react';\n// import { createUserWithEmailAndPassword } from \"firebase/auth\";\n// import { auth } from \"../../firebase\";\n// import '../../login.css'\n\n// export const SignUp = () => {\n//     const [email, setEmail] = useState(\"\")\n//     const [password, setPassword] = useState(\"\")\n//     const register = (e) => {\n//         e.preventDefault();\n//         createUserWithEmailAndPassword(auth, email, password)\n//             .then((userCredential) => {\n//                 console.log(userCredential);\n//             })\n//             .catch((error) => {\n//                 console.log(error);\n//             })\n//     }\n//     return(\n//         <div className = 'signin--container'>\n//             <form onSubmit={register} className ='login--fields'>\n//                 <input type= 'email' placeholder='Email...' value={email} onChange={(e)=>setEmail(e.target.value)}></input>\n//                 <input type= 'password' placeholder ='Password...'value={password} onChange={(e)=> setPassword(e.target.value)}></input>\n//                 <button className ='signin--button'type = \"submit\">Sign Up</button>\n//             </form>\n//         </div>\n//     )\n// }\n_s(SignUp, \"Jf2+H6HtXecTpNqbLmRn8HIy+mo=\");\n_c = SignUp;\nvar _c;\n$RefreshReg$(_c, \"SignUp\");","map":{"version":3,"names":["React","useState","auth","db","createUserWithEmailAndPassword","collection","doc","setDoc","getDocs","query","where","Redirect","jsxDEV","_jsxDEV","SignUp","_s","userEmail","setUserEmail","userPassword","setUserPassword","error","setError","userUsername","setUserUsername","isAuthenticated","setIsAuthenticated","isLoading","setIsLoading","register","e","preventDefault","usernameQuery","usernameQuerySnapshot","empty","userCredential","console","log","userDocRef","user","uid","email","displayName","role","orgs","message","to","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onSubmit","type","placeholder","value","onChange","target","required","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Games/Desktop/Homework/vendia_project/src/components/auth/SignUp.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\nimport { auth, db } from \"../../firebase\";\r\nimport { createUserWithEmailAndPassword } from \"firebase/auth\";\r\nimport { collection, doc, setDoc, getDocs, query, where } from 'firebase/firestore';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nexport const SignUp = () => {\r\n    const [userEmail, setUserEmail] = useState(null);\r\n    const [userPassword, setUserPassword] = useState(null);\r\n    const [error, setError] = useState(null);\r\n    const [userUsername, setUserUsername] = useState(null);\r\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n  \r\n    const register = async (e) => {\r\n      e.preventDefault();\r\n      try {\r\n        setIsLoading(true); \r\n  \r\n        if (!userUsername || !userEmail || !userPassword) {\r\n          setError(\"Please fill in all the fields.\");\r\n          setIsLoading(false); \r\n          return;\r\n        }\r\n        const usernameQuery = query(collection(db, 'users'), where('displayName', '==', userUsername));\r\n        const usernameQuerySnapshot = await getDocs(usernameQuery);\r\n        if (usernameQuerySnapshot.empty) {\r\n          const userCredential = await createUserWithEmailAndPassword(auth, userEmail, userPassword);\r\n          console.log(userCredential);\r\n          const userDocRef = doc(db, 'users', userCredential.user.uid);\r\n          await setDoc(userDocRef, {\r\n            email: userEmail,\r\n            displayName: userUsername,\r\n            role: 'user',\r\n            orgs: [0],\r\n          });\r\n          setIsAuthenticated(true);\r\n        } else {\r\n          setError('Username is already taken.');\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n        setError(error.message);\r\n      } finally {\r\n        setIsLoading(false); \r\n      }\r\n    };\r\n  \r\n    if (isAuthenticated) {\r\n      return <Redirect to=\"/Home\" />;\r\n    }\r\n  \r\n    return (\r\n      <div className=\"flex items-center justify-center\">\r\n        <form onSubmit={register} className=\"max-w-md px-4 py-8 bg-white rounded-lg shadow-lg\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Username...\"\r\n            value={userUsername}\r\n            onChange={(e) => setUserUsername(e.target.value)}\r\n            required\r\n            className=\"w-full px-4 py-2 mb-4 border rounded-lg focus:outline-none focus:ring focus:border-blue-300\"\r\n          />\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Email...\"\r\n            value={userEmail}\r\n            onChange={(e) => setUserEmail(e.target.value)}\r\n            required\r\n            className=\"w-full px-4 py-2 mb-4 border rounded-lg focus:outline-none focus:ring focus:border-blue-300\"\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Password...\"\r\n            value={userPassword}\r\n            onChange={(e) => setUserPassword(e.target.value)}\r\n            required\r\n            className=\"w-full px-4 py-2 mb-4 border rounded-lg focus:outline-none focus:ring focus:border-blue-300\"\r\n          />\r\n          <button\r\n            className=\"w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring focus:border-blue-300\"\r\n            type=\"submit\"\r\n            disabled={isLoading}\r\n          >\r\n            {isLoading ? \"Signing Up...\" : \"Sign Up\"} \r\n          </button>\r\n          {error && <div className=\"text-red-500\">{error}</div>}\r\n        </form>\r\n      </div>\r\n    );\r\n  };\r\n\r\n// import React, { useState } from 'react';\r\n// import { createUserWithEmailAndPassword } from \"firebase/auth\";\r\n// import { auth } from \"../../firebase\";\r\n// import '../../login.css'\r\n\r\n// export const SignUp = () => {\r\n//     const [email, setEmail] = useState(\"\")\r\n//     const [password, setPassword] = useState(\"\")\r\n//     const register = (e) => {\r\n//         e.preventDefault();\r\n//         createUserWithEmailAndPassword(auth, email, password)\r\n//             .then((userCredential) => {\r\n//                 console.log(userCredential);\r\n//             })\r\n//             .catch((error) => {\r\n//                 console.log(error);\r\n//             })\r\n//     }\r\n//     return(\r\n//         <div className = 'signin--container'>\r\n//             <form onSubmit={register} className ='login--fields'>\r\n//                 <input type= 'email' placeholder='Email...' value={email} onChange={(e)=>setEmail(e.target.value)}></input>\r\n//                 <input type= 'password' placeholder ='Password...'value={password} onChange={(e)=> setPassword(e.target.value)}></input>\r\n//                 <button className ='signin--button'type = \"submit\">Sign Up</button>\r\n//             </form>\r\n//         </div>\r\n//     )\r\n// }"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AAEvC,SAASC,IAAI,EAAEC,EAAE,QAAQ,gBAAgB;AACzC,SAASC,8BAA8B,QAAQ,eAAe;AAC9D,SAASC,UAAU,EAAEC,GAAG,EAAEC,MAAM,EAAEC,OAAO,EAAEC,KAAK,EAAEC,KAAK,QAAQ,oBAAoB;AACnF,SAASC,QAAQ,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,OAAO,MAAMC,MAAM,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACxB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACiB,YAAY,EAAEC,eAAe,CAAC,GAAGlB,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACmB,KAAK,EAAEC,QAAQ,CAAC,GAAGpB,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACqB,YAAY,EAAEC,eAAe,CAAC,GAAGtB,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACuB,eAAe,EAAEC,kBAAkB,CAAC,GAAGxB,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAACyB,SAAS,EAAEC,YAAY,CAAC,GAAG1B,QAAQ,CAAC,KAAK,CAAC;EAEjD,MAAM2B,QAAQ,GAAG,MAAOC,CAAC,IAAK;IAC5BA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAI;MACFH,YAAY,CAAC,IAAI,CAAC;MAElB,IAAI,CAACL,YAAY,IAAI,CAACN,SAAS,IAAI,CAACE,YAAY,EAAE;QAChDG,QAAQ,CAAC,gCAAgC,CAAC;QAC1CM,YAAY,CAAC,KAAK,CAAC;QACnB;MACF;MACA,MAAMI,aAAa,GAAGtB,KAAK,CAACJ,UAAU,CAACF,EAAE,EAAE,OAAO,CAAC,EAAEO,KAAK,CAAC,aAAa,EAAE,IAAI,EAAEY,YAAY,CAAC,CAAC;MAC9F,MAAMU,qBAAqB,GAAG,MAAMxB,OAAO,CAACuB,aAAa,CAAC;MAC1D,IAAIC,qBAAqB,CAACC,KAAK,EAAE;QAC/B,MAAMC,cAAc,GAAG,MAAM9B,8BAA8B,CAACF,IAAI,EAAEc,SAAS,EAAEE,YAAY,CAAC;QAC1FiB,OAAO,CAACC,GAAG,CAACF,cAAc,CAAC;QAC3B,MAAMG,UAAU,GAAG/B,GAAG,CAACH,EAAE,EAAE,OAAO,EAAE+B,cAAc,CAACI,IAAI,CAACC,GAAG,CAAC;QAC5D,MAAMhC,MAAM,CAAC8B,UAAU,EAAE;UACvBG,KAAK,EAAExB,SAAS;UAChByB,WAAW,EAAEnB,YAAY;UACzBoB,IAAI,EAAE,MAAM;UACZC,IAAI,EAAE,CAAC,CAAC;QACV,CAAC,CAAC;QACFlB,kBAAkB,CAAC,IAAI,CAAC;MAC1B,CAAC,MAAM;QACLJ,QAAQ,CAAC,4BAA4B,CAAC;MACxC;IACF,CAAC,CAAC,OAAOD,KAAK,EAAE;MACde,OAAO,CAACC,GAAG,CAAChB,KAAK,CAAC;MAClBC,QAAQ,CAACD,KAAK,CAACwB,OAAO,CAAC;IACzB,CAAC,SAAS;MACRjB,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,IAAIH,eAAe,EAAE;IACnB,oBAAOX,OAAA,CAACF,QAAQ;MAACkC,EAAE,EAAC;IAAO;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAChC;EAEA,oBACEpC,OAAA;IAAKqC,SAAS,EAAC,kCAAkC;IAAAC,QAAA,eAC/CtC,OAAA;MAAMuC,QAAQ,EAAExB,QAAS;MAACsB,SAAS,EAAC,kDAAkD;MAAAC,QAAA,gBACpFtC,OAAA;QACEwC,IAAI,EAAC,MAAM;QACXC,WAAW,EAAC,aAAa;QACzBC,KAAK,EAAEjC,YAAa;QACpBkC,QAAQ,EAAG3B,CAAC,IAAKN,eAAe,CAACM,CAAC,CAAC4B,MAAM,CAACF,KAAK,CAAE;QACjDG,QAAQ;QACRR,SAAS,EAAC;MAA6F;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxG,CAAC,eACFpC,OAAA;QACEwC,IAAI,EAAC,OAAO;QACZC,WAAW,EAAC,UAAU;QACtBC,KAAK,EAAEvC,SAAU;QACjBwC,QAAQ,EAAG3B,CAAC,IAAKZ,YAAY,CAACY,CAAC,CAAC4B,MAAM,CAACF,KAAK,CAAE;QAC9CG,QAAQ;QACRR,SAAS,EAAC;MAA6F;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxG,CAAC,eACFpC,OAAA;QACEwC,IAAI,EAAC,UAAU;QACfC,WAAW,EAAC,aAAa;QACzBC,KAAK,EAAErC,YAAa;QACpBsC,QAAQ,EAAG3B,CAAC,IAAKV,eAAe,CAACU,CAAC,CAAC4B,MAAM,CAACF,KAAK,CAAE;QACjDG,QAAQ;QACRR,SAAS,EAAC;MAA6F;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxG,CAAC,eACFpC,OAAA;QACEqC,SAAS,EAAC,0HAA0H;QACpIG,IAAI,EAAC,QAAQ;QACbM,QAAQ,EAAEjC,SAAU;QAAAyB,QAAA,EAEnBzB,SAAS,GAAG,eAAe,GAAG;MAAS;QAAAoB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClC,CAAC,EACR7B,KAAK,iBAAIP,OAAA;QAAKqC,SAAS,EAAC,cAAc;QAAAC,QAAA,EAAE/B;MAAK;QAAA0B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjD;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEV,CAAC;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAAlC,EAAA,CAjHaD,MAAM;AAAA8C,EAAA,GAAN9C,MAAM;AAAA,IAAA8C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}