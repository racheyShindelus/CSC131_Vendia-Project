{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Games\\\\Desktop\\\\Homework\\\\vendia_project\\\\src\\\\DataContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect, useLayoutEffect } from 'react';\nimport { auth, db } from \"./firebase\";\nimport { collection, doc, getDoc } from 'firebase/firestore';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DataContext = /*#__PURE__*/createContext();\nconst [userData, setUserData] = useState(null);\nexport function DataProvider({\n  children\n}) {\n  _s();\n  useEffect(() => {\n    const listen = auth.onAuthStateChanged(async user => {\n      if (user) {\n        const userId = user.uid;\n        const userDocRef = doc(db, 'users', userId);\n        try {\n          const userDocSnapshot = await getDoc(userDocRef);\n          console.log('Snapshot exists:', userDocSnapshot.exists());\n          console.log('User data:', userDocSnapshot.data());\n          if (userDocSnapshot.exists()) {\n            const data = userDocSnapshot.data();\n            setUserData(data);\n            console.log('User data set:', data);\n          } else {\n            setUserData(null);\n          }\n        } catch (error) {\n          console.log('Error getting user data:', error);\n          setUserData(null);\n        }\n      } else {\n        setUserData(null);\n      }\n    });\n    return listen;\n  }, []);\n  return /*#__PURE__*/_jsxDEV(DataContext.Provider, {\n    value: {\n      userData\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n_s(DataProvider, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = DataProvider;\nexport function useData() {\n  _s2();\n  return useContext(DataContext);\n}\n\n// export const useData = () => {\n//   return useContext(DataContext);\n// };\n\n// export default DataContext;\n_s2(useData, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"DataProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useLayoutEffect","auth","db","collection","doc","getDoc","useAuth","jsxDEV","_jsxDEV","DataContext","userData","setUserData","DataProvider","children","_s","listen","onAuthStateChanged","user","userId","uid","userDocRef","userDocSnapshot","console","log","exists","data","error","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useData","_s2","$RefreshReg$"],"sources":["C:/Users/Games/Desktop/Homework/vendia_project/src/DataContext.js"],"sourcesContent":["import React, {createContext, useContext, useState, useEffect, useLayoutEffect} from 'react'\r\nimport { auth, db } from \"./firebase\";\r\nimport { collection, doc, getDoc } from 'firebase/firestore'\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst DataContext = createContext();\r\nconst [userData, setUserData] = useState(null);\r\nexport function DataProvider({ children }) {\r\n  \r\n\r\n  useEffect(() => {\r\n    const listen = auth.onAuthStateChanged(async (user) => {\r\n      if (user) {\r\n        const userId = user.uid;\r\n        const userDocRef = doc(db, 'users', userId);\r\n        try {\r\n          const userDocSnapshot = await getDoc(userDocRef);\r\n          console.log('Snapshot exists:', userDocSnapshot.exists());\r\n          console.log('User data:', userDocSnapshot.data());\r\n\r\n          if (userDocSnapshot.exists()) {\r\n            const data = userDocSnapshot.data();\r\n            setUserData(data);\r\n            console.log('User data set:', data);\r\n          } else {\r\n            setUserData(null);\r\n          }\r\n        } catch (error) {\r\n          console.log('Error getting user data:', error);\r\n          setUserData(null);\r\n        }\r\n      } else {\r\n        setUserData(null);\r\n      }\r\n    });\r\n    return listen;\r\n  }, []);\r\n\r\n  return (\r\n    <DataContext.Provider value={{userData}}>\r\n      {children}\r\n    </DataContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useData() {\r\n  return useContext(DataContext)\r\n}\r\n\r\n// export const useData = () => {\r\n//   return useContext(DataContext);\r\n// };\r\n\r\n// export default DataContext;"],"mappings":";;;AAAA,OAAOA,KAAK,IAAGC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,eAAe,QAAO,OAAO;AAC5F,SAASC,IAAI,EAAEC,EAAE,QAAQ,YAAY;AACrC,SAASC,UAAU,EAAEC,GAAG,EAAEC,MAAM,QAAQ,oBAAoB;AAC5D,SAASC,OAAO,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,MAAMC,WAAW,gBAAGb,aAAa,CAAC,CAAC;AACnC,MAAM,CAACc,QAAQ,EAAEC,WAAW,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;AAC9C,OAAO,SAASc,YAAYA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EAGzCf,SAAS,CAAC,MAAM;IACd,MAAMgB,MAAM,GAAGd,IAAI,CAACe,kBAAkB,CAAC,MAAOC,IAAI,IAAK;MACrD,IAAIA,IAAI,EAAE;QACR,MAAMC,MAAM,GAAGD,IAAI,CAACE,GAAG;QACvB,MAAMC,UAAU,GAAGhB,GAAG,CAACF,EAAE,EAAE,OAAO,EAAEgB,MAAM,CAAC;QAC3C,IAAI;UACF,MAAMG,eAAe,GAAG,MAAMhB,MAAM,CAACe,UAAU,CAAC;UAChDE,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEF,eAAe,CAACG,MAAM,CAAC,CAAC,CAAC;UACzDF,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEF,eAAe,CAACI,IAAI,CAAC,CAAC,CAAC;UAEjD,IAAIJ,eAAe,CAACG,MAAM,CAAC,CAAC,EAAE;YAC5B,MAAMC,IAAI,GAAGJ,eAAe,CAACI,IAAI,CAAC,CAAC;YACnCd,WAAW,CAACc,IAAI,CAAC;YACjBH,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEE,IAAI,CAAC;UACrC,CAAC,MAAM;YACLd,WAAW,CAAC,IAAI,CAAC;UACnB;QACF,CAAC,CAAC,OAAOe,KAAK,EAAE;UACdJ,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEG,KAAK,CAAC;UAC9Cf,WAAW,CAAC,IAAI,CAAC;QACnB;MACF,CAAC,MAAM;QACLA,WAAW,CAAC,IAAI,CAAC;MACnB;IACF,CAAC,CAAC;IACF,OAAOI,MAAM;EACf,CAAC,EAAE,EAAE,CAAC;EAEN,oBACEP,OAAA,CAACC,WAAW,CAACkB,QAAQ;IAACC,KAAK,EAAE;MAAClB;IAAQ,CAAE;IAAAG,QAAA,EACrCA;EAAQ;IAAAgB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B;AAAClB,EAAA,CApCeF,YAAY;AAAAqB,EAAA,GAAZrB,YAAY;AAsC5B,OAAO,SAASsB,OAAOA,CAAA,EAAG;EAAAC,GAAA;EACxB,OAAOtC,UAAU,CAACY,WAAW,CAAC;AAChC;;AAEA;AACA;AACA;;AAEA;AAAA0B,GAAA,CARgBD,OAAO;AAAA,IAAAD,EAAA;AAAAG,YAAA,CAAAH,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}