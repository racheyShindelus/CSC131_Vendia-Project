{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Games\\\\Desktop\\\\Homework\\\\vendia_project\\\\src\\\\components\\\\auth\\\\SignIn.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { signInWithEmailAndPassword } from \"firebase/auth\";\nimport { Redirect } from 'react-router-dom';\nimport { doc, getDoc, query, where, collection, getDocs } from 'firebase/firestore';\nimport { auth, db } from \"../../firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const SignIn = () => {\n  _s();\n  const [input, setInput] = useState(null);\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const login = async e => {\n    e.preventDefault();\n    setIsLoading(true);\n    try {\n      let signInCredential;\n      if (input.includes('@')) {\n        signInCredential = await signInWithEmailAndPassword(auth, input, password);\n      } else {\n        const usersCollection = collection(db, 'users');\n        const usernameQuery = query(usersCollection, where('displayName', '==', input));\n        const querySnapshot = await getDocs(usernameQuery);\n        if (!querySnapshot.empty) {\n          const userDoc = querySnapshot.docs[0];\n          const email = userDoc.data().email;\n          signInCredential = await signInWithEmailAndPassword(auth, email, password);\n        } else {\n          console.log('Username not found');\n          setError('Username not found');\n          setIsLoading(false);\n          return;\n        }\n      }\n      setIsAuthenticated(true);\n    } catch (error) {\n      console.log(error);\n      setError(error.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  if (isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/Home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center justify-center\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: login,\n      className: \"max-w-md px-4 py-8 bg-white rounded-lg shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Email or Username...\",\n        value: input,\n        onChange: e => setInput(e.target.value),\n        required: true,\n        className: \"w-full px-4 py-2 mb-4 border rounded-lg focus:outline-none focus:ring focus:border-blue-300\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Password...\",\n        value: password,\n        onChange: e => setPassword(e.target.value),\n        required: true,\n        className: \"w-full px-4 py-2 mb-4 border rounded-lg focus:outline-none focus:ring focus:border-blue-300\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring focus:border-blue-300\",\n        type: \"submit\",\n        disabled: isLoading,\n        children: isLoading ? 'Signing In...' : 'Sign In'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-red-500\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n\n// import React, { useState } from 'react';\n// import { signInWithEmailAndPassword } from \"firebase/auth\";\n// import { auth } from \"../../firebase\";\n// import '../../login.css'\n\n// export const SignIn = () => {\n//     const [email, setEmail] = useState(\"\")\n//     const [password, setPassword] = useState(\"\")\n//     const login = (e) => {\n//         e.preventDefault();\n//         signInWithEmailAndPassword(auth, email, password)\n//             .then((userCredential) => {\n//                 console.log(userCredential);\n//             })\n//             .catch((error) => {\n//                 console.log(error);\n//             })\n//     }\n//     return(\n//         <div className = 'signin--container'>\n//             <form onSubmit={login} className = 'login--fields'>\n//                 <input type= 'email' placeholder='Email...' value={email} onChange={(e)=>setEmail(e.target.value)}></input>\n//                 <input type= 'password' placeholder ='Password...'value={password} onChange={(e)=> setPassword(e.target.value)}></input>\n//                 <button className='signin--button' type = \"submit\">Sign In</button>\n\n//             </form>\n//         </div>\n//     )\n// }\n_s(SignIn, \"WI/GhrtjbEGbiHgfVF8ereSSbpo=\");\n_c = SignIn;\nvar _c;\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"names":["React","useState","signInWithEmailAndPassword","Redirect","doc","getDoc","query","where","collection","getDocs","auth","db","jsxDEV","_jsxDEV","SignIn","_s","input","setInput","password","setPassword","error","setError","isLoading","setIsLoading","isAuthenticated","setIsAuthenticated","login","e","preventDefault","signInCredential","includes","usersCollection","usernameQuery","querySnapshot","empty","userDoc","docs","email","data","console","log","message","to","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onSubmit","type","placeholder","value","onChange","target","required","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Games/Desktop/Homework/vendia_project/src/components/auth/SignIn.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { signInWithEmailAndPassword } from \"firebase/auth\";\r\n\r\nimport {Redirect} from 'react-router-dom'\r\nimport { doc, getDoc, query, where, collection, getDocs } from 'firebase/firestore'\r\nimport { auth, db } from \"../../firebase\";\r\n\r\nexport const SignIn = () => {\r\n  const [input, setInput] = useState(null);\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n\r\n  const login = async (e) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n    try {\r\n      let signInCredential;\r\n\r\n      if (input.includes('@')) {\r\n        signInCredential = await signInWithEmailAndPassword(auth, input, password);\r\n      } else {\r\n        const usersCollection = collection(db, 'users');\r\n        const usernameQuery = query(usersCollection, where('displayName', '==', input));\r\n        const querySnapshot = await getDocs(usernameQuery);\r\n        if (!querySnapshot.empty) {\r\n          const userDoc = querySnapshot.docs[0];\r\n          const email = userDoc.data().email;\r\n          signInCredential = await signInWithEmailAndPassword(auth, email, password);\r\n        } else {\r\n          console.log('Username not found');\r\n          setError('Username not found');\r\n          setIsLoading(false);\r\n          return;\r\n        }\r\n      }\r\n      setIsAuthenticated(true);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setError(error.message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  if (isAuthenticated) {\r\n    return <Redirect to=\"/Home\" />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center\">\r\n      <form onSubmit={login} className=\"max-w-md px-4 py-8 bg-white rounded-lg shadow-lg\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Email or Username...\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          required\r\n          className=\"w-full px-4 py-2 mb-4 border rounded-lg focus:outline-none focus:ring focus:border-blue-300\"\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Password...\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          required\r\n          className=\"w-full px-4 py-2 mb-4 border rounded-lg focus:outline-none focus:ring focus:border-blue-300\"\r\n        />\r\n        <button\r\n          className=\"w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring focus:border-blue-300\"\r\n          type=\"submit\"\r\n          disabled={isLoading}\r\n        >\r\n          {isLoading ? 'Signing In...' : 'Sign In'}\r\n        </button>\r\n        {error && <div className=\"text-red-500\">{error}</div>}\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\n// import React, { useState } from 'react';\r\n// import { signInWithEmailAndPassword } from \"firebase/auth\";\r\n// import { auth } from \"../../firebase\";\r\n// import '../../login.css'\r\n\r\n// export const SignIn = () => {\r\n//     const [email, setEmail] = useState(\"\")\r\n//     const [password, setPassword] = useState(\"\")\r\n//     const login = (e) => {\r\n//         e.preventDefault();\r\n//         signInWithEmailAndPassword(auth, email, password)\r\n//             .then((userCredential) => {\r\n//                 console.log(userCredential);\r\n//             })\r\n//             .catch((error) => {\r\n//                 console.log(error);\r\n//             })\r\n//     }\r\n//     return(\r\n//         <div className = 'signin--container'>\r\n//             <form onSubmit={login} className = 'login--fields'>\r\n//                 <input type= 'email' placeholder='Email...' value={email} onChange={(e)=>setEmail(e.target.value)}></input>\r\n//                 <input type= 'password' placeholder ='Password...'value={password} onChange={(e)=> setPassword(e.target.value)}></input>\r\n//                 <button className='signin--button' type = \"submit\">Sign In</button>\r\n\r\n//             </form>\r\n//         </div>\r\n//     )\r\n// }"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}